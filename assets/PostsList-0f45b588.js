import{R as H,r as n,j as o,T as oe,S as ae,g as y,U as I,V as re,W as O,X as D,Y as ce,Z as ie,h as C,H as le,l as de,_ as ue,$ as me,e as fe,a0 as he,G as pe,a1 as w,a2 as xe,a3 as Ee,a4 as ye,a5 as Ce,a6 as Ae,a7 as L,d as je,a8 as ve,a9 as Se,C as v,L as ge}from"./index-c624fe8d.js";function S(...e){return e.filter(t=>t!=null).reduce((t,s)=>{if(typeof s!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?s:function(...r){t.apply(this,r),s.apply(this,r)}},null)}const Te={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function Ne(e,t){const s=`offset${e[0].toUpperCase()}${e.slice(1)}`,a=t[s],r=Te[e];return a+parseInt(I(t,r[0]),10)+parseInt(I(t,r[1]),10)}const we={[re]:"collapse",[O]:"collapsing",[D]:"collapsing",[ce]:"collapse show"},Re=H.forwardRef(({onEnter:e,onEntering:t,onEntered:s,onExit:a,onExiting:r,className:i,children:c,dimension:l="height",in:d=!1,timeout:x=300,mountOnEnter:f=!1,unmountOnExit:E=!1,appear:A=!1,getDimensionValue:h=Ne,...p},j)=>{const u=typeof l=="function"?l():l,g=n.useMemo(()=>S(m=>{m.style[u]="0"},e),[u,e]),T=n.useMemo(()=>S(m=>{const $=`scroll${u[0].toUpperCase()}${u.slice(1)}`;m.style[u]=`${m[$]}px`},t),[u,t]),te=n.useMemo(()=>S(m=>{m.style[u]=null},s),[u,s]),se=n.useMemo(()=>S(m=>{m.style[u]=`${h(u,m)}px`,ie(m)},a),[a,h,u]),ne=n.useMemo(()=>S(m=>{m.style[u]=null},r),[u,r]);return o.jsx(oe,{ref:j,addEndListener:ae,...p,"aria-expanded":p.role?d:null,onEnter:g,onEntering:T,onEntered:te,onExit:se,onExiting:ne,childRef:c.ref,in:d,timeout:x,mountOnEnter:f,unmountOnExit:E,appear:A,children:(m,$)=>H.cloneElement(c,{...$,className:y(i,c.props.className,we[m],u==="width"&&"collapse-horizontal")})})}),$e=Re;function k(e,t){return Array.isArray(e)?e.includes(t):e===t}const F=n.createContext({});F.displayName="AccordionContext";const R=F,U=n.forwardRef(({as:e="div",bsPrefix:t,className:s,children:a,eventKey:r,...i},c)=>{const{activeEventKey:l}=n.useContext(R);return t=C(t,"accordion-collapse"),o.jsx($e,{ref:c,in:k(l,r),...i,className:y(s,t),children:o.jsx(e,{children:n.Children.only(a)})})});U.displayName="AccordionCollapse";const G=U,W=n.createContext({eventKey:""});W.displayName="AccordionItemContext";const B=W,Z=n.forwardRef(({as:e="div",bsPrefix:t,className:s,onEnter:a,onEntering:r,onEntered:i,onExit:c,onExiting:l,onExited:d,...x},f)=>{t=C(t,"accordion-body");const{eventKey:E}=n.useContext(B);return o.jsx(G,{eventKey:E,onEnter:a,onEntering:r,onEntered:i,onExit:c,onExiting:l,onExited:d,children:o.jsx(e,{ref:f,...x,className:y(s,t)})})});Z.displayName="AccordionBody";const Me=Z;function _e(e,t){const{activeEventKey:s,onSelect:a,alwaysOpen:r}=n.useContext(R);return i=>{let c=e===s?null:e;r&&(Array.isArray(s)?s.includes(e)?c=s.filter(l=>l!==e):c=[...s,e]:c=[e]),a==null||a(c,i),t==null||t(i)}}const X=n.forwardRef(({as:e="button",bsPrefix:t,className:s,onClick:a,...r},i)=>{t=C(t,"accordion-button");const{eventKey:c}=n.useContext(B),l=_e(c,a),{activeEventKey:d}=n.useContext(R);return e==="button"&&(r.type="button"),o.jsx(e,{ref:i,onClick:l,...r,"aria-expanded":Array.isArray(d)?d.includes(c):c===d,className:y(s,t,!k(d,c)&&"collapsed")})});X.displayName="AccordionButton";const K=X,V=n.forwardRef(({as:e="h2",bsPrefix:t,className:s,children:a,onClick:r,...i},c)=>(t=C(t,"accordion-header"),o.jsx(e,{ref:c,...i,className:y(s,t),children:o.jsx(K,{onClick:r,children:a})})));V.displayName="AccordionHeader";const Be=V,Y=n.forwardRef(({as:e="div",bsPrefix:t,className:s,eventKey:a,...r},i)=>{t=C(t,"accordion-item");const c=n.useMemo(()=>({eventKey:a}),[a]);return o.jsx(B.Provider,{value:c,children:o.jsx(e,{ref:i,...r,className:y(s,t)})})});Y.displayName="AccordionItem";const He=Y,z=n.forwardRef((e,t)=>{const{as:s="div",activeKey:a,bsPrefix:r,className:i,onSelect:c,flush:l,alwaysOpen:d,...x}=le(e,{activeKey:"onSelect"}),f=C(r,"accordion"),E=n.useMemo(()=>({activeEventKey:a,onSelect:c,alwaysOpen:d}),[a,c,d]);return o.jsx(R.Provider,{value:E,children:o.jsx(s,{ref:t,...x,className:y(i,f,l&&`${f}-flush`)})})});z.displayName="Accordion";const N=Object.assign(z,{Button:K,Collapse:G,Item:He,Header:Be,Body:Me});var _=Math.pow(2,31)-1;function P(e,t,s){var a=s-Date.now();e.current=a<=_?setTimeout(t,a):setTimeout(function(){return P(e,t,s)},_)}function Ie(){var e=de(),t=n.useRef();return ue(function(){return clearTimeout(t.current)}),n.useMemo(function(){var s=function(){return clearTimeout(t.current)};function a(r,i){i===void 0&&(i=0),e()&&(s(),i<=_?t.current=setTimeout(r,i):P(t,r,Date.now()+i))}return{set:a,clear:s}},[])}const Le={[D]:"showing",[O]:"showing show"},q=n.forwardRef((e,t)=>o.jsx(me,{...e,ref:t,transitionClasses:Le}));q.displayName="ToastFade";const Oe=q,De=n.createContext({onClose(){}}),Q=De,b=n.forwardRef(({bsPrefix:e,closeLabel:t="Close",closeVariant:s,closeButton:a=!0,className:r,children:i,...c},l)=>{e=C(e,"toast-header");const d=n.useContext(Q),x=fe(f=>{d==null||d.onClose==null||d.onClose(f)});return o.jsxs("div",{ref:l,...c,className:y(e,r),children:[i,a&&o.jsx(he,{"aria-label":t,variant:s,onClick:x,"data-dismiss":"toast"})]})});b.displayName="ToastHeader";const ke=b,Fe=pe("toast-body"),J=n.forwardRef(({bsPrefix:e,className:t,transition:s=Oe,show:a=!0,animation:r=!0,delay:i=5e3,autohide:c=!1,onClose:l,bg:d,...x},f)=>{e=C(e,"toast");const E=n.useRef(i),A=n.useRef(l);n.useEffect(()=>{E.current=i,A.current=l},[i,l]);const h=Ie(),p=!!(c&&a),j=n.useCallback(()=>{p&&(A.current==null||A.current())},[p]);n.useEffect(()=>{h.set(j,E.current)},[h,j]);const u=n.useMemo(()=>({onClose:l}),[l]),g=!!(s&&r),T=o.jsx("div",{...x,ref:f,className:y(e,t,d&&`bg-${d}`,!g&&(a?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return o.jsx(Q.Provider,{value:u,children:g&&s?o.jsx(s,{in:a,unmountOnExit:!0,children:T}):T})});J.displayName="Toast";const M=Object.assign(J,{Body:Fe,Header:ke});function ee(e=w){const t=e===w?xe:()=>n.useContext(e);return function(){const{store:a}=t();return a}}const Ue=ee();function Ge(e=w){const t=e===w?Ue:ee(e);return function(){return t().dispatch}}const We=Ge(),Ze=We,Xe=Ee,Ke=e=>n.createElement("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",...e},n.createElement("defs",null,n.createElement("style",null,".cls-1{fill:none;}")),n.createElement("title",null),n.createElement("g",{"data-name":"Layer 2",id:"Layer_2"},n.createElement("path",{d:"M16,29A13,13,0,1,1,29,16,13,13,0,0,1,16,29ZM16,5A11,11,0,1,0,27,16,11,11,0,0,0,16,5Z"}),n.createElement("path",{d:"M16,17a5,5,0,1,1,5-5A5,5,0,0,1,16,17Zm0-8a3,3,0,1,0,3,3A3,3,0,0,0,16,9Z"}),n.createElement("path",{d:"M25.55,24a1,1,0,0,1-.74-.32A11.35,11.35,0,0,0,16.46,20h-.92a11.27,11.27,0,0,0-7.85,3.16,1,1,0,0,1-1.38-1.44A13.24,13.24,0,0,1,15.54,18h.92a13.39,13.39,0,0,1,9.82,4.32A1,1,0,0,1,25.55,24Z"})),n.createElement("g",{id:"frame"},n.createElement("rect",{className:"cls-1",height:32,width:32}))),Ve="_header_qxlhw_1",Ye={header:Ve};async function ze(e){const t={isSucceeded:!1};return await new Promise(s=>setTimeout(()=>s(!0),500)),ye.get(Ce.GET_COMMENTS_BY_POST,{params:{postId:e}}).then(function(s){return s.status===Ae?(t.isSucceeded=!0,t.data=s.data):(t.isSucceeded=!1,t.message=s.statusText||L),t}).catch(function(){return{isSucceeded:!1,message:L}})}const Pe=({comment:e})=>o.jsxs(M,{style:{width:"100%"},children:[o.jsx(M.Header,{closeButton:!1,children:e.email}),o.jsx(M.Body,{children:e.body})]}),qe="_commentsWrapper_k7pxz_1",Qe={commentsWrapper:qe},be=({postId:e})=>{const t="There are no comments yet",[s,a]=n.useState(!1),[r,i]=n.useState(!1),[c,l]=n.useState(),[d,x]=n.useState(""),f=Xe(h=>h.history.postsCommentsHistory),E=Ze(),A=async()=>{if(!c){const h=f.find(p=>p.postId===e);if(h)l(h.comments);else{a(!0);const p=await ze(e);if(a(!1),p.isSucceeded){l(p.data||[]);const j={postId:e,comments:p.data||[]};E(ve([...f,j]))}else i(!0),x(p.message||Se)}}};return o.jsx(N,{children:o.jsxs(N.Item,{eventKey:`${e}`,children:[o.jsx(N.Header,{children:"Комментарии"}),o.jsx(N.Body,{onEnter:A,children:c&&c.length?c.map(h=>o.jsx("div",{className:Qe.commentsWrapper,children:o.jsx(Pe,{comment:h})},h.id)):s?o.jsx(je,{}):r?o.jsx("p",{children:d}):o.jsx("p",{children:t})})]})})},Je=({post:e,showAvatar:t=!0})=>o.jsxs(v,{style:{width:"300px"},children:[o.jsxs(v.Header,{as:"h5",className:Ye.header,children:[t&&o.jsx(ge,{to:`UserInfo/${e.userId}`,children:o.jsx(Ke,{})}),e.title]}),o.jsx(v.Body,{children:o.jsx(v.Text,{children:e.body})}),o.jsx(v.Footer,{children:o.jsx(be,{postId:e.id})})]}),et="_postList_ydacx_1",tt={postList:et},nt=({posts:e,showAvatar:t})=>o.jsx("div",{className:tt.postList,children:e&&e.length?e.map(s=>o.jsx(Je,{post:s,showAvatar:t},s.id)):"Nothing to display"});export{nt as P,Ze as a,Xe as u};
